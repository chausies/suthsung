(function(){var n,e,t,o,i,r,s;for(console.log("Starting"),window.lastTime=null,window.clientTimeOffset=null,window.getTime=async function(){var n,e;return n=Date.now()/1e3,(!window.lastTime||!window.clientTimeOffset||Math.abs(n-window.lastTime)>600)&&(e=await fetch("https://showcase.api.linx.twenty57.net/UnixTime/tounix?date=now").then(function(n){return n.text()}).then(n=>parseInt(n)),n=(n+Date.now()/1e3)/2,window.clientTimeOffset=e-n),window.lastTime=Math.round(n+window.clientTimeOffset)},window.getTime().then(function(n){return console.log("Current Real Unix Time is: "+n)}),r=function(n){return new TextEncoder("utf-8").encode(n)},function(n){return(new TextDecoder).decode(n)},s=function(n,e){var t,o,i,r,s;for(n.length>e.length?(i=n.slice(0),s=e):(i=e.slice(0),s=n),t=o=0,r=s.length-1;0<=r?o<=r:o>=r;t=0<=r?++o:--o)i[t]^=s[t];return i},i=function(n){return nacl.hash(n).slice(0,32)},window.SALT=i(r("suthsung")),window.hasher=function(n){var e;return Array.isArray(n)?hasher(s(hasher(n.slice(1)),hasher(salts[0]))):(e=r(n),i(s(i(e),window.SALT)))},window.pswdUsrnmToHash=function(n,e){var t,o,i,r;return o=window.hasher(n),r=window.hasher(e),t=bcrypt.hash(o,r,12),i=s(o,Uint8Array.from(t)),nacl.util.encodeBase64(i)},window.getParam=function(n){return new URL(window.location.href).searchParams.get(n)},window.setParams=function(n){var e,t,o;for(e in t=new URL(window.location.href),n)o=n[e],t.searchParams.set(e,o);return window.history.pushState(null,null,t.href)},window.pages={},n=0,e=(o=["signin","list","room","settings"]).length;n<e;n++)t=o[n],window.pages[t]=fetch("/html/"+t+".html").then(function(n){return n.text()});window.runPage=async function(n,e){switch(window.setParams({loc:n}),document.getElementById("mainContent").innerHTML=await window.pages[n],n){case"signin":return window.signin();case"settings":return window.settings();case"room":return window.room(e);default:return window.list()}},window.goToPage=function(){var n,e;return e=window.getParam("loc"),n=localStorage.getItem("account")?e&&("signin"===e||"settings"===e||"room"===e||"list"===e)?e:"list":"signin",window.runPage(n)},window.onload=function(){return window.goToPage()}}).call(this),function(){window.list=function(){window.getTime().then(function(n){console.log("Loaded list page at time: "+n),console.log("list.coffee under construction at time "+n)}),document.querySelector("nav").style.display=null}}.call(this),function(){window.room=function(n){window.getTime().then(function(n){console.log("room.coffee under construction at time "+n)})}}.call(this),function(){window.settings=function(){window.getTime().then(function(n){console.log("settings.coffee under construction at time "+n)})}}.call(this),function(){window.signin=function(){var n,e,t,o,i;window.getTime().then(function(n){console.log("Loaded Sign In page at time: "+n)}),document.querySelector("nav").style.display="none",n=document.querySelector("#signInForm"),i=document.querySelector("#usernameField"),e=document.querySelector("#passwordField"),t=document.querySelector("#sessionField"),o=function(n){var o,r,s,a;n.preventDefault(),a=i.value.toLowerCase(),i.value="",o=e.value,e.value="",s=t.value.toLowerCase(),t.value="",r=window.pswdUsrnmToHash(o,a),localStorage.setItem("account",[r,s].join(",")),window.runPage("list")},n.onsubmit=o}}.call(this);