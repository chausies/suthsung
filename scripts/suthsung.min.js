(function(){var e,n,o,t,i,a,r,l=[].indexOf;for(console.log("Starting"),window.lastTime=null,window.clientTimeOffset=null,window.getTime=async function(){var e,n;return e=Date.now()/1e3,(!window.lastTime||!window.clientTimeOffset||Math.abs(e-window.lastTime)>600)&&(n=await fetch("https://showcase.api.linx.twenty57.net/UnixTime/tounix?date=now").then(function(e){return e.text()}).then(e=>parseInt(e)),e=(e+Date.now()/1e3)/2,window.clientTimeOffset=n-e),window.lastTime=Math.round(e+window.clientTimeOffset)},window.getTime().then(function(e){return console.log("Current Real Unix Time is: "+e)}),a=function(e){return new TextEncoder("utf-8").encode(e)},function(e){return(new TextDecoder).decode(e)},r=function(e,n){var o,t,i,a,r;for(e.length>n.length?(i=e.slice(0),r=n):(i=n.slice(0),r=e),o=t=0,a=r.length-1;0<=a?t<=a:t>=a;o=0<=a?++t:--t)i[o]^=r[o];return i},i=function(e){return nacl.hash(e).slice(0,32)},window.SALT=i(a("suthsung")),window.hasher=function(e){var n;return Array.isArray(e)?hasher(r(hasher(e.slice(1)),hasher(salts[0]))):(n=a(e),i(r(i(n),window.SALT)))},window.pswdUsrnmToHash=function(e,n){var o,t,i,a;return t=window.hasher(e),a=window.hasher(n),o=bcrypt.hash(t,a,12),i=r(t,Uint8Array.from(o)),nacl.util.encodeBase64(i)},window.getParam=function(e){return new URL(window.location.href).searchParams.get(e)},t=["signin","list","room","newRoom","joinRoom","settings"],window.pages={},e=0,n=t.length;e<n;e++)o=t[e],window.pages[o]=fetch("/html/"+o+".html").then(function(e){return e.text()});window.runPage=async function(e,n){switch(document.getElementById("mainContent").innerHTML=await window.pages[e],e){case"signin":return window.signin();case"settings":return window.settings();case"newRoom":return window.newRoom();case"joinRoom":return window.joinRoom();case"room":return window.room(n);default:return window.list()}},window.goToPage=function(e){var n,o,i,a,r;if(e){for(o in i=e.loc,a=new URL(window.location.href),e)r=e[o],a.searchParams.set(o,r);window.location.href=a.href}else{if(i=window.getParam("loc"),!localStorage.getItem("account"))return void window.goToPage({loc:"signin"});if(!(i&&l.call(t,i)>=0))return void window.goToPage({loc:"list"})}return n=null,"room"===i&&(n=window.getParam("id")),window.runPage(i,n)},window.onload=function(){return window.goToPage()}}).call(this),function(){window.joinRoom=function(){var e,n,o,t,i,a,r;window.getTime().then(function(e){console.log("Loaded Join Room page at time: "+e)}),document.querySelector("#navBar").style.display="none",[t,r,i]=localStorage.getItem("account").split(","),e=document.querySelector("#joinRoomForm"),a=document.querySelector("#tempKeyField"),(o=document.querySelector("#userNicknameField")).value=r,n=function(e){var n,t;e.preventDefault(),t=a.value.toLowerCase(),6===a.length?(n=o.value,roomName.value="",n.value="","a"+nacl.util.encodeBase64(window.hasher(t))+"a",alert("UNDER CONSTRUCTION")):alert("Temporary Key must be exactly 6 alphanumeric characters")},e.onsubmit=n}}.call(this),function(){window.list=function(){window.getTime().then(function(e){console.log("Loaded list page at time: "+e),console.log("list.coffee under construction at time "+e)}),document.querySelector("nav").style.display=null}}.call(this),function(){window.newRoom=function(){var e,n,o,t,i,a,r;window.getTime().then(function(e){console.log("Loaded New Room page at time: "+e)}),document.querySelector("#navBar").style.display="none",[i,r,a]=localStorage.getItem("account").split(","),n=document.querySelector("#newRoomForm"),t=document.querySelector("#roomNameField"),(o=document.querySelector("#userNicknameField")).value=r,e=function(e){e.preventDefault(),t.value.value="",o.value.value="",nacl.util.encodeBase64(crypto.getRandomValues(new Uint8Array(16))),alert("UNDER CONSTRUCTION")},n.onsubmit=e}}.call(this),function(){window.room=function(e){window.getTime().then(function(e){console.log("room.coffee under construction at time "+e)}),window.scrollTo(0,document.body.scrollHeight)}}.call(this),function(){window.settings=function(){window.getTime().then(function(e){console.log("settings.coffee under construction at time "+e)})}}.call(this),function(){window.signin=function(){var e,n,o,t,i;window.getTime().then(function(e){console.log("Loaded Sign In page at time: "+e)}),document.querySelector("#navBar").style.display="none",e=document.querySelector("#signInForm"),i=document.querySelector("#usernameField"),n=document.querySelector("#passwordField"),o=document.querySelector("#sessionField"),t=function(e){var t,a,r,l;e.preventDefault(),l=i.value.toLowerCase().replaceAll(",",""),i.value="",t=n.value,n.value="",r=o.value.toLowerCase(),o.value="",a=window.pswdUsrnmToHash(t,l),localStorage.setItem("account",[a,l,r].join(",")),window.goToPage({loc:"list"})},e.onsubmit=t}}.call(this);